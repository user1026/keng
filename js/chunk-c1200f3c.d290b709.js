(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c1200f3c"],{"0317":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"vmenu"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.add()}}},[t._v("添加")]),a("v-list",{attrs:{total:t.total,list:t.list,childmenu:t.pmenu}}),a("v-alert",{ref:"al",attrs:{childmenu:t.pmenu,list:t.list}}),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.pageSize,total:t.total},on:{"current-change":t.changePage}})],1)},n=[],s=a("adb5"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:1==t.childmenu.isup?"编辑":"添加",visible:t.childmenu.isshow},on:{"update:visible":function(e){return t.$set(t.childmenu,"isshow",e)},closed:t.rest}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"所属角色","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择上级菜单"},on:{change:function(e){return t.changePid()}},model:{value:t.form.roleid,callback:function(e){t.$set(t.form,"roleid",e)},expression:"form.roleid"}},t._l(t.rolelist,(function(t){return a("el-option",{key:t.id,attrs:{label:t.rolename,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"用户名",prop:"username","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"password","show-password":"",clearable:"",autocomplete:"off"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("el-form-item",{attrs:{label:"状态","label-width":t.formLabelWidth}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":2},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.rest}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.add()}}},[t._v("确 定")])],1)],1)],1)},l=[],r={name:"alert",props:["childmenu","list"],data:function(){return{formLabelWidth:"100px",form:{roleid:0,title:"",username:"",password:"",status:2},rolelist:[]}},created:function(){},mounted:function(){var t=this;this.url=this.$router.options.routes[1].children,Object(s["E"])(this.childmenu).then((function(e){200==e.data.code&&(t.rolelist=e.data.list)})),1==this.childmenu.isup&&Object(s["d"])(this.childmenu.id).then((function(e){200==e.data.code&&(t.form=e.data.list)}))},methods:{formempty:function(){this.form={roleid:0,username:"",password:"",status:2}},add:function(){var t=this;1==this.childmenu.isup?(this.form.id=this.childmenu.id,Object(s["f"])(this.form).then((function(e){200==e.data.code&&(t.$message({message:"修改成功",type:"success"}),t.$parent.init(),t.rest(),t.formempty())}))):Object(s["a"])(this.form).then((function(e){200==e.data.code&&(t.$message({message:"添加成功",type:"success"}),t.$parent.init(),t.rest(),t.formempty())}))},changePid:function(){0==this.form.pid?this.form.type=1:this.form.type=2},rest:function(){this.childmenu.isshow=!1,this.childmenu.isup=!1},getad:function(t){var e=this;Object(s["d"])(t).then((function(a){200==a.data.code&&(e.form=a.data.list,e.form.uid=t)}))}}},u=r,c=a("2877"),d=Object(c["a"])(u,o,l,!1,null,"973b9784",null),m=d.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:t.list,"row-key":"id",border:"","tree-props":{children:"children"}}},[a("el-table-column",{attrs:{prop:"uid",label:"用户编号",sortable:"",width:"180"}}),a("el-table-column",{attrs:{prop:"username",label:"用户名称",sortable:"",width:"180"}}),a("el-table-column",{attrs:{prop:"roleid",label:"所属角色"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?a("el-button",{attrs:{type:"primary"}},[t._v("启用")]):a("el-button",{attrs:{type:"info"}},[t._v("禁用")])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.up(e.row.uid)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.del(e.row.uid)}}},[t._v("删除")])]}}])})],1)],1)},p=[],h={name:"list",props:["list","childmenu"],data:function(){return{}},mounted:function(){},methods:{up:function(t){this.$parent.upload(t)},del:function(t){var e=this;e.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["c"])(t).then((function(t){200==t.data.code&&(e.$message({type:"success",message:"删除成功!"}),e.$parent.init())}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}}},b=h,g=Object(c["a"])(b,f,p,!1,null,"07a17d58",null),v=g.exports,w={name:"admin",components:{vList:v,vAlert:m},data:function(){return{pmenu:{isshow:!1,isup:!1,id:0},ad:{size:2,page:1},total:0,pageSize:2,list:[]}},mounted:function(){this.init()},methods:{add:function(){this.pmenu.isshow=!0,this.$refs.al.formempty()},init:function(){this.adgetlist(),this.adgetall()},adgetlist:function(){var t=this;Object(s["e"])(this.ad).then((function(e){if(200==e.data.code){if(0==e.data.list.length&&t.ad.page>1)return t.ad.page--,void t.adgetlist();t.list=e.data.list}}))},upload:function(t){this.pmenu.isup=!0,this.pmenu.isshow=!0,this.pmenu.id=t,this.$refs.al.getad(t)},adgetall:function(){var t=this;Object(s["b"])().then((function(e){200==e.data.code&&(t.total=e.data.list[0].total)}))},changePage:function(t){this.ad.page=t,this.adgetlist()}}},y=w,$=(a("7ccb"),Object(c["a"])(y,i,n,!1,null,"cce96486",null));e["default"]=$.exports},"7ccb":function(t,e,a){"use strict";a("9f45")},"9f45":function(t,e,a){}}]);
//# sourceMappingURL=chunk-c1200f3c.d290b709.js.map