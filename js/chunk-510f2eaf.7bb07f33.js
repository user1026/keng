(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-510f2eaf"],{4163:function(t,e,a){},"7b8d":function(t,e,a){"use strict";a("8d13")},"8d13":function(t,e,a){},"92e5":function(t,e,a){"use strict";a("c9d1")},c9d1:function(t,e,a){},e4c8:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cate"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.add()}}},[t._v("添加")]),a("v-list",{attrs:{list:t.list}}),a("v-alert",{ref:"al",attrs:{childmenu:t.pmenu,list:t.list}})],1)},n=[],s=(a("4160"),a("159b"),a("adb5")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:1==t.childmenu.isup?"编辑":"添加",visible:t.childmenu.isshow},on:{"update:visible":function(e){return t.$set(t.childmenu,"isshow",e)},closed:t.rest}},[t._v(" "+t._s(t.form)+" "),a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:"上级菜单","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择上级菜单"},model:{value:t.form.pid,callback:function(e){t.$set(t.form,"pid",e)},expression:"form.pid"}},[a("el-option",{attrs:{label:"顶级菜单",value:0}}),t._l(t.list,(function(t){return a("el-option",{key:t.id,attrs:{label:t.catename,value:t.id}})}))],2)],1),a("el-form-item",{attrs:{label:"分类名称",prop:"catename","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.catename,callback:function(e){t.$set(t.form,"catename",e)},expression:"form.catename"}})],1),0!==t.form.pid?a("el-form-item",{attrs:{label:"图片",prop:"title","label-width":t.formLabelWidth}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"#","http-request":t.httpRequest,"show-file-list":!1,"on-change":t.changeImg2,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1):t._e(),a("el-form-item",{attrs:{label:"状态","label-width":t.formLabelWidth}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":2},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.rest}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.add()}}},[t._v("确 定")])],1)],1)],1)},r=[],l=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),{name:"alert",props:["childmenu","list"],data:function(){return{formLabelWidth:"100px",form:{pid:0,catename:"",img:null,status:2},imageUrl:""}},methods:{formempty:function(){this.form={pid:0,catename:"",img:{},status:2},this.imageUrl=""},httpRequest:function(){},add:function(){var t=this;1==this.childmenu.isup?Object(s["p"])(this.form).then((function(e){200==e.data.code&&(t.$message({message:"修改成功",type:"success"}),t.$parent.init(),t.rest(),t.formempty())})):Object(s["l"])(this.form).then((function(e){200==e.data.code&&(t.$message({message:"添加成功",type:"success"}),t.$parent.init(),t.rest(),t.formempty())}))},rest:function(){this.childmenu.isshow=!1,this.childmenu.isup=!1},upload:function(t){var e=this;Object(s["n"])(t).then((function(a){e.form=a.data.list,e.form.img="http://localhost:3000"+e.form.img,e.form.id=t}))},changeImg2:function(t){var e=t.raw;this.imageUrl=URL.createObjectURL(e),this.form.img=e},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a}}}),c=l,u=(a("7b8d"),a("2877")),m=Object(u["a"])(c,o,r,!1,null,"82c38470",null),d=m.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:t.list,"row-key":"id",border:"","tree-props":{children:"children"}}},[a("el-table-column",{attrs:{prop:"id",label:"分类编号",sortable:"",width:"180"}}),a("el-table-column",{attrs:{prop:"catename",label:"分类名称",sortable:"",width:"180"}}),a("el-table-column",{attrs:{label:"菜单图片"},scopedSlots:t._u([{key:"default",fn:function(e){return["[object Object]"!==e.row.img?a("img",{attrs:{src:e.row.img,alt:"#"}}):t._e()]}}])}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1===e.row.status?a("el-button",{attrs:{type:"primary"}},[t._v("启用")]):a("el-button",{attrs:{type:"info"}},[t._v("禁用")])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.up(e.row.id)}}},[t._v("编辑")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.del(e.row.id)}}},[t._v("删除")])]}}])})],1)],1)},p=[],h={name:"list",props:["list"],data:function(){return{}},mounted:function(){},methods:{up:function(t){this.$parent.sendlist(t)},del:function(t){var e=this;e.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(s["m"])(t).then((function(t){200==t.data.code&&(e.$message({type:"success",message:"删除成功!"}),e.$parent.init())}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}}},b=h,v=(a("e4da"),Object(u["a"])(b,f,p,!1,null,"fb1314d8",null)),g=v.exports,w={name:"cate",components:{vList:g,vAlert:d},data:function(){return{pmenu:{isshow:!1,isup:!1,id:0},list:[],baseurl:"http://47.100.79.78"}},watch:{},mounted:function(){this.init()},methods:{add:function(){this.pmenu.isshow=!0,this.$refs.al.formempty()},init:function(){var t=this;Object(s["o"])().then((function(e){200==e.data.code&&(t.list=e.data.list,t.list.forEach((function(e){e.children.forEach((function(e){e.img=t.baseurl+e.img}))})))}))},sendlist:function(t){this.pmenu.isup=!0,this.pmenu.isshow=!0,this.pmenu.id=t,this.$refs.al.upload(t)}}},y=w,_=(a("92e5"),Object(u["a"])(y,i,n,!1,null,"534e6230",null));e["default"]=_.exports},e4da:function(t,e,a){"use strict";a("4163")}}]);
//# sourceMappingURL=chunk-510f2eaf.7bb07f33.js.map